<!--<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ランダムフォルダ画像表示</title>
<style>
  html, body {
    margin: 0;
    height: 100%;
    background: #000;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
  #controls {
    position: absolute;
    top: 20px;
    display: flex;
    gap: 12px;
    align-items: center;
    z-index: 10;
  }
  select, button {
    padding: 8px 16px;
    font-size: 16px;
    border-radius: 6px;
  }
  #pickBtn {
    background: #2563eb;
    color: #fff;
    border: none;
    cursor: pointer;
  }
  #mainImg {
    max-width: 100vw;
    max-height: 100vh;
    object-fit: contain;
    display: none;
    cursor: pointer;
  }
  #meta {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    color: #ccc;
    font-size: 14px;
  }
</style>
</head>
<body>

<div id="controls">
  <label>
    難易度：
    <select id="levelSelect">
      <option value="easy">簡単</option>
      <option value="normal">難しい</option>
      <option value="hard">鬼むず</option>
    </select>
  </label>
  <button id="pickBtn">問題</button>
</div>

<img id="mainImg" alt="画像がここに表示されます">
<div id="meta"></div>

<script>
(() => {
  // ====== 難易度ごとのフォルダ配下 ======
  // 各配列にはサブフォルダ名だけを列挙（例: 簡単/国語, 簡単/理科 の場合は "国語","理科"）
  const foldersByLevel = {
    easy:    ['アニメ', 'カップ麺', 'スポーツ', 'ニンテンドー', '偉人', '学校行事', '果物', '犬', '祝日'],
    normal:  ['スポーツ選手','世界遺産', '古代文明', '大国', '惑星', '首都'],
    hard:    ['AI','NBA','コンビニ','ノーベル賞','ハリウッドスター','元素','古文','四字熟語','百人一首','金属','首相']
  };
  // ルートフォルダ名（例: 簡単 → ./簡単/フォルダA/1.png という構成）
  const levelRoots = {
    easy:   '簡単',
    normal: '難しい',
    hard:   '鬼むず'
  };

  const levelSelect = document.getElementById('levelSelect');
  const pickBtn     = document.getElementById('pickBtn');
  const mainImg     = document.getElementById('mainImg');
  const meta        = document.getElementById('meta');

  let currentLevel  = 'easy';
  let currentFolder = null;
  let showing       = null; // "1" or "2"

  // 難易度の選択
  levelSelect.addEventListener('change', () => {
    currentLevel = levelSelect.value;
    currentFolder = null;
    mainImg.style.display = 'none';
    meta.textContent = '';
  });

  // ランダムにサブフォルダを選ぶ
  function chooseRandomFolder(level) {
    const arr = foldersByLevel[level];
    const idx = Math.floor(Math.random() * arr.length);
    return arr[idx];
  }

  // 画像を表示
  function showImage(path, label) {
    mainImg.style.display = 'none';
    mainImg.src = path;
    showing = label;
  }

  // 画像が読み込まれたら表示
  mainImg.addEventListener('load', () => {
    mainImg.style.display = 'block';
    meta.textContent = `${levelRoots[currentLevel]} / ${currentFolder} / ${showing}.jpeg`;
  });

  // ボタンクリック → 1.pngを表示
  pickBtn.addEventListener('click', () => {
    currentFolder = chooseRandomFolder(currentLevel);
    const root = levelRoots[currentLevel];
    showImage(`${root}/${currentFolder}/1.jpeg`, '1');
  });

  // 画像クリック → 2.pngに切り替え
  mainImg.addEventListener('click', () => {
    if (!currentFolder) return;
    if (showing === '1') {
      const root = levelRoots[currentLevel];
      showImage(`${root}/${currentFolder}/2.jpeg`, '2');
    }
  });
})();
</script>

</body>
</html>-->

<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ランダムフォルダ画像表示</title>
<style>
  html, body {
    margin: 0;
    height: 100%;
    background: #000;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
  #controls {
    position: absolute;
    top: 20px;
    display: flex;
    gap: 12px;
    align-items: center;
    z-index: 10;
  }
  select, button {
    padding: 8px 16px;
    font-size: 16px;
    border-radius: 6px;
  }
  #pickBtn {
    background: #2563eb;
    color: #fff;
    border: none;
    cursor: pointer;
  }
  #mainImg {
    max-width: 100vw;
    max-height: 100vh;
    object-fit: contain;
    display: none;
    cursor: pointer;
  }
  #meta {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    color: #ccc;
    font-size: 14px;
  }
  /* タイマー表示 */
  #timer {
    position: absolute;
    top: 20%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 64px;
    font-weight: bold;
    color: #000;
    display: none;
    z-index: 20;
  }
</style>
</head>
<body>

<div id="controls">
  <label>
    難易度：
    <select id="levelSelect">
      <option value="easy">簡単</option>
      <option value="normal">難しい</option>
      <option value="hard">鬼むず</option>
    </select>
  </label>
  <button id="pickBtn">問題</button>
</div>

<div id="timer"></div>

<img id="mainImg" alt="画像がここに表示されます">
<div id="meta"></div>

<script>
(() => {
  const foldersByLevel = {
    easy:    ['アニメ','カップ麺','スポーツ','ニンテンドー','偉人','学校行事','果物','犬','祝日'],
    normal:  ['スポーツ選手','世界遺産','古代文明','大国','惑星','首都'],
    hard:    ['AI','NBA','コンビニ','ノーベル賞','ハリウッドスター','元素','古文','四字熟語','百人一首','金属','首相']
  };
  const levelRoots = {
    easy:   '簡単',
    normal: '難しい',
    hard:   '鬼むず'
  };

  const levelSelect = document.getElementById('levelSelect');
  const pickBtn     = document.getElementById('pickBtn');
  const mainImg     = document.getElementById('mainImg');
  const meta        = document.getElementById('meta');
  const timerEl     = document.getElementById('timer');

  let currentLevel  = 'easy';
  let currentFolder = null;
  let showing       = null;

  // タイマー用
  let countdownId   = null;
  let timeLeft      = 0;
  let paused        = false; // 一時停止フラグ
  let timerStarted  = false; // 1度だけ開始させるためのフラグ

  // 難易度変更時
  levelSelect.addEventListener('change', () => {
    currentLevel = levelSelect.value;
    currentFolder = null;
    mainImg.style.display = 'none';
    meta.textContent = '';
    timerEl.style.display = timerStarted ? 'block' : 'none';
  });

  // フォルダ選択
  function chooseRandomFolder(level) {
    const arr = foldersByLevel[level];
    return arr[Math.floor(Math.random() * arr.length)];
  }

  // 画像表示
  function showImage(path, label) {
    mainImg.style.display = 'none';
    mainImg.src = path;
    showing = label;
  }

  // 画像読み込み完了時
  mainImg.addEventListener('load', () => {
    mainImg.style.display = 'block';
    meta.textContent = `${levelRoots[currentLevel]} / ${currentFolder} / ${showing}.jpeg`;
  });

  // タイマー開始（リロードするまで続く）
  function startGlobalTimer(initialTime) {
    timeLeft = initialTime;
    timerEl.style.display = 'block';
    timerEl.textContent = timeLeft;

    countdownId = setInterval(() => {
      if (!paused && timeLeft > 0) {
        timeLeft--;
        timerEl.textContent = timeLeft > 0 ? timeLeft : '終了';
      }
    }, 1000);
  }

  // 問題ボタン
  pickBtn.addEventListener('click', () => {
    currentFolder = chooseRandomFolder(currentLevel);
    const root = levelRoots[currentLevel];
    showImage(`${root}/${currentFolder}/1.jpeg`, '1');

    // 初回だけ、4秒後にタイマー開始
    if (!timerStarted) {
      timerStarted = true;
      setTimeout(() => {
        startGlobalTimer(50);
      }, 4000);
    }
  });

  // 画像クリック（1→2 に切り替え）
  mainImg.addEventListener('click', () => {
    if (!currentFolder) return;
    const root = levelRoots[currentLevel];

    if (showing === '1') {
      showImage(`${root}/${currentFolder}/2.jpeg`, '2');
      paused = true; // 2のとき一時停止
    } else if (showing === '2') {
      showImage(`${root}/${currentFolder}/1.jpeg`, '1');
      paused = false; // 1に戻ったら再開
    }
  });
})();
</script>

</body>
</html>
