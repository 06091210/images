<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ランダムフォルダ画像表示</title>
  <style>
    body{font-family:system-ui, -apple-system, 'Hiragino Kaku Gothic ProN', 'Segoe UI', Roboto, 'Noto Sans JP';
         display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;margin:0;background:#f6f8fb}
    .app{width:100%;max-width:720px;padding:20px;box-sizing:border-box;text-align:center}
    button{appearance:none;padding:12px 18px;border-radius:10px;border:0;background:#2563eb;color:white;font-weight:600;font-size:16px;cursor:pointer;box-shadow:0 6px 18px rgba(37,99,235,0.18)}
    button:active{transform:translateY(1px)}
    #imageWrap{margin-top:18px;border-radius:12px;overflow:hidden;background:white;display:inline-block}
    img{display:block;max-width:100%;height:auto;touch-action:manipulation;}
    #info{margin-top:12px;color:#333;font-size:14px}
    #error{color:#b91c1c;margin-top:8px}
    small{color:#666}
  </style>
</head>
<body>
  <div class="app">
    <h1>ランダムフォルダ画像表示</h1>

    <!-- ボタン：押すとランダムなフォルダを選び、そのフォルダ内の 1.jpg を表示します -->
    <button id="pickBtn">ランダムにフォルダを選ぶ</button>

    <div id="imageWrap" style="display:none;">
      <img id="photo" alt="画像がここに表示されます" />
    </div>

    <div id="info"></div>
    <div id="error"></div>

    <p style="margin-top:18px"><small>※ フォルダはこのHTMLと同じ配下に置いてください。画像ファイル名は "1.jpg" と "2.jpg" として下さい。</small></p>
  </div>

  <script>
    // ====== ここを編集して、自分のフォルダ名を列挙してください ======
    // 例: const folders = ["photos/setA","images/album1","pictures/2025"];
    const folders = ["folder1", "folder2", "folder3"]; // <- ここを書き換えてください
    // ==================================================================

    const pickBtn = document.getElementById('pickBtn');
    const photo = document.getElementById('photo');
    const imageWrap = document.getElementById('imageWrap');
    const info = document.getElementById('info');
    const error = document.getElementById('error');

    let currentFolder = null;
    let showing = 1; // 1 または 2

    function setInfo(text){ info.textContent = text; }
    function setError(text){ error.textContent = text; }

    function getRandomItem(arr){
      if (!arr || arr.length === 0) return null;
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function showImageInFolder(folder, num){
      if (!folder) return;
      const path = folder.replace(/\/g, '/') + '/' + num + '.jpg';
      setError('');
      // 画像の読み込みを確認するために Image を使って事前チェック
      const imgTest = new Image();
      imgTest.onload = () => {
        photo.src = path;
        imageWrap.style.display = 'inline-block';
        showing = num;
        setInfo(`フォルダ: ${folder} ／ 表示: ${num}.jpg`);
      };
      imgTest.onerror = () => {
        setError(`エラー: ${path} が見つかりません。フォルダ名やファイル名を確認してください。`);
        imageWrap.style.display = 'none';
      };
      imgTest.src = path;
    }

    // ボタンでランダムにフォルダ選択して、1.jpg を表示
    pickBtn.addEventListener('click', () => {
      const folder = getRandomItem(folders);
      if (!folder){ setError('フォルダリストが空です。folders 配列を編集してください。'); return; }
      currentFolder = folder;
      showImageInFolder(currentFolder, 1);
    });

    // 画像をタップ／クリックしたら、同じフォルダの 2.jpg を表示する
    photo.addEventListener('click', () => {
      if (!currentFolder){ setError('先に「ランダムにフォルダを選ぶ」ボタンを押してください。'); return; }
      const next = (showing === 1) ? 2 : 1; // もし2→1の切替も許したければこのまま
      showImageInFolder(currentFolder, next);
    });

    // タッチデバイスでの UX をほんの少し向上（ダブルタップズームを抑えるなど）
    document.addEventListener('touchstart', (e)=>{}, {passive:true});

    // おまけ：キーボードで操作（Enterでランダム選択、Spaceで画像切替）
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') pickBtn.click();
      if (e.code === 'Space') {
        e.preventDefault();
        if (currentFolder) photo.click();
      }
    });
  </script>
</body>
</html>
